<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–ª–∏–µ–Ω—Ç—Å–∫–∏ –ü—Ä–æ—Ñ–∏–ª–∏ - –¢–ï–†–ú–ò–ù–ê–¢–û–† –ò–ó–î–ê–ù–ò–ï</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–† –ó–ê–©–ò–¢–ê - –°–¢–ê–†–¢–ò–†–ê –í–ï–î–ù–ê–ì–ê! -->
    <script>
        console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–† –ó–ê–©–ò–¢–ê –°–¢–ê–†–¢–ò–†–ê...');
        
        // –¢–ï–†–ú–ò–ù–ê–¢–û–† –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        const TERMINATOR_CONFIG = {
            PROTECTION_INTERVAL: 50,  // –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –≤—Å–µ–∫–∏ 50ms
            BACKUP_KEY: 'clientProfiles_TERMINATOR_BACKUP',
            SESSION_KEY: 'clientProfiles_SESSION_BACKUP',
            TARGET_KEY: 'clientProfiles',
            CONSOLE_PREFIX: 'ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†:'
        };
        
        // –¢–ï–†–ú–ò–ù–ê–¢–û–† –î–ê–ù–ù–ò
        let TERMINATOR_STATE = {
            isActive: false,
            protectedData: null,
            attacksBlocked: 0,
            autoBackupBlocked: false
        };
        
        // ‚ö° –ù–ï–ó–ê–ë–ê–í–ù–ê –ó–ê–©–ò–¢–ê - –°–¢–ê–†–¢–ò–†–ê –ü–†–ï–î–ò –í–°–ò–ß–ö–û –î–†–£–ì–û
        (function IMMEDIATE_TERMINATOR_PROTECTION() {
            console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üö® –ù–ï–ó–ê–ë–ê–í–ù–ê –ó–ê–©–ò–¢–ê –ê–ö–¢–ò–í–ò–†–ê–ù–ê!');
            
            // –ó–∞–ø–∞–∑–≤–∞–º–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏—Ç–µ –¥–∞–Ω–Ω–∏ –í–ï–î–ù–ê–ì–ê
            const existingData = localStorage.getItem(TERMINATOR_CONFIG.TARGET_KEY);
            if (existingData) {
                try {
                    const parsed = JSON.parse(existingData);
                    if (Array.isArray(parsed) && parsed.length > 0) {
                        TERMINATOR_STATE.protectedData = parsed;
                        localStorage.setItem(TERMINATOR_CONFIG.BACKUP_KEY, existingData);
                        sessionStorage.setItem(TERMINATOR_CONFIG.SESSION_KEY, existingData);
                        console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üíæ –î–∞–Ω–Ω–∏ –∑–∞—â–∏—Ç–µ–Ω–∏! –ü—Ä–æ–µ–∫—Ç–∏: ' + parsed.length);
                    }
                } catch(e) {
                    console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' ‚ö†Ô∏è –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏:', e);
                }
            }
            
            // –ë–õ–û–ö–ò–†–ê–ú–ï AUTO-BACKUP –°–ò–°–¢–ï–ú–ò
            window.DISABLE_AUTO_BACKUP = true;
            window.STOIC_AUTO_BACKUP_DISABLED = true;
            console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üõë AUTO-BACKUP –°–ò–°–¢–ï–ú–ò –ë–õ–û–ö–ò–†–ê–ù–ò!');
            
        })();
        
        // üíÄ –¢–ï–†–ú–ò–ù–ê–¢–û–† –§–£–ù–ö–¶–ò–ò
        function TERMINATE_ATTACK() {
            const currentData = localStorage.getItem(TERMINATOR_CONFIG.TARGET_KEY);
            
            if (!currentData || currentData === '[]' || currentData === 'null') {
                // –ê–¢–ê–ö–ê –ó–ê–°–ï–ß–ï–ù–ê!
                TERMINATOR_STATE.attacksBlocked++;
                console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üö® –ê–¢–ê–ö–ê –ó–ê–°–ï–ß–ï–ù–ê! –ù–æ–º–µ—Ä: ' + TERMINATOR_STATE.attacksBlocked);
                
                // –ö–û–ù–¢–†–ê–ê–¢–ê–ö–ê
                if (TERMINATOR_STATE.protectedData) {
                    localStorage.setItem(TERMINATOR_CONFIG.TARGET_KEY, JSON.stringify(TERMINATOR_STATE.protectedData));
                    console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' ‚öîÔ∏è –ö–û–ù–¢–†–ê–ê–¢–ê–ö–ê! –î–∞–Ω–Ω–∏ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏!');
                } else {
                    // –û–ø–∏—Ç–≤–∞–º–µ —Å–µ –¥–∞ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–∏–º –æ—Ç backup
                    const backup = localStorage.getItem(TERMINATOR_CONFIG.BACKUP_KEY) || sessionStorage.getItem(TERMINATOR_CONFIG.SESSION_KEY);
                    if (backup) {
                        localStorage.setItem(TERMINATOR_CONFIG.TARGET_KEY, backup);
                        TERMINATOR_STATE.protectedData = JSON.parse(backup);
                        console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üîÑ –í—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–æ –æ—Ç backup!');
                    }
                }
                return true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ –¥–∞–ª–∏ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –Ω–∞–º–∞–ª–µ–ª–∏
            try {
                const current = JSON.parse(currentData);
                if (TERMINATOR_STATE.protectedData && Array.isArray(current) && Array.isArray(TERMINATOR_STATE.protectedData)) {
                    if (current.length < TERMINATOR_STATE.protectedData.length) {
                        TERMINATOR_STATE.attacksBlocked++;
                        console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üö® –î–ê–ù–ù–ò –ù–ê–ú–ê–õ–ï–ù–ò! –û—Ç ' + TERMINATOR_STATE.protectedData.length + ' –Ω–∞ ' + current.length);
                        localStorage.setItem(TERMINATOR_CONFIG.TARGET_KEY, JSON.stringify(TERMINATOR_STATE.protectedData));
                        console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' ‚öîÔ∏è –ö–û–ù–¢–†–ê–ê–¢–ê–ö–ê! –î–∞–Ω–Ω–∏ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω–∏!');
                        return true;
                    }
                }
            } catch(e) {
                console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' ‚ö†Ô∏è –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞:', e);
            }
            
            return false;
        }
        
        // üéØ –õ–û–ö–ê–õ–ò–ó–ò–†–ê–ù–ï –ò –°–ü–ò–†–ê–ù–ï –ù–ê AUTO-BACKUP
        function DESTROY_AUTO_BACKUP() {
            // –¢—ä—Ä—Å–∏–º –≤—ä–≤ window –æ–±–µ–∫—Ç–∞
            for (let prop in window) {
                if (prop.toLowerCase().includes('backup') || prop.toLowerCase().includes('auto')) {
                    try {
                        if (typeof window[prop] === 'function') {
                            window[prop] = function() {
                                console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üõë –ë–õ–û–ö–ò–†–ê–ù AUTO-BACKUP: ' + prop);
                                return false;
                            };
                        }
                    } catch(e) {
                        // –ò–≥–Ω–æ—Ä–∏—Ä–∞–º–µ –≥—Ä–µ—à–∫–∏
                    }
                }
            }
            
            // –ü—Ä–µ–Ω–∞–ø–∏—Å–≤–∞–º–µ –∏–∑–≤–µ—Å—Ç–Ω–∏ –ø—Ä–æ–±–ª–µ–º–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏
            if (window.initializeApp) {
                const originalInit = window.initializeApp;
                window.initializeApp = function() {
                    console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üõ°Ô∏è –ü–†–ï–°–†–ï–©–ê–ù–ï –ù–ê initializeApp');
                    // –ù–ï –≥–æ –≤–∏–∫–∞–º–µ –∏–ª–∏ –≥–æ –≤–∏–∫–∞–º–µ —Å –ø—Ä–µ–¥–ø–∞–∑–Ω–∏ –º–µ—Ä–∫–∏
                    return false;
                };
            }
        }
        
        // üëÅÔ∏è –¢–ï–†–ú–ò–ù–ê–¢–û–† –ù–ê–ë–õ–Æ–î–ê–¢–ï–õ
        function START_TERMINATOR_SURVEILLANCE() {
            console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üëÅÔ∏è –ù–ê–ë–õ–Æ–î–ï–ù–ò–ï–¢–û –ó–ê–ü–û–ß–í–ê...');
            
            // –û—Å–Ω–æ–≤–Ω–∞ –∑–∞—â–∏—Ç–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª
            setInterval(function() {
                if (TERMINATE_ATTACK()) {
                    console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üî• –û–±—â–æ –±–ª–æ–∫–∏—Ä–∞–Ω–∏ –∞—Ç–∞–∫–∏: ' + TERMINATOR_STATE.attacksBlocked);
                }
            }, TERMINATOR_CONFIG.PROTECTION_INTERVAL);
            
            // DOM –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª
            if (window.MutationObserver) {
                const observer = new MutationObserver(function(mutations) {
                    // –ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ –ø—Ä–∏ –≤—Å—è–∫–∞ DOM –ø—Ä–æ–º—è–Ω–∞
                    TERMINATE_ATTACK();
                });
                
                observer.observe(document.documentElement, {
                    childList: true,
                    subtree: true,
                    attributes: true
                });
                
                console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üïµÔ∏è DOM –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω!');
            }
            
            TERMINATOR_STATE.isActive = true;
        }
        
        // üöÄ –°–¢–ê–†–¢–ò–†–ê–ù–ï –ù–ê –¶–Ø–õ–ê–¢–ê –°–ò–°–¢–ï–ú–ê
        function INITIALIZE_TERMINATOR() {
            console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üöÄ –ü–™–õ–ù–ê –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø...');
            
            DESTROY_AUTO_BACKUP();
            START_TERMINATOR_SURVEILLANCE();
            
            console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' ‚úÖ –¢–ï–†–ú–ò–ù–ê–¢–û–† –ê–ö–¢–ò–í–ï–ù –ò –ì–û–¢–û–í!');
            console.log(TERMINATOR_CONFIG.CONSOLE_PREFIX + ' üìä –°—Ç–∞—Ç—É—Å:', TERMINATOR_STATE);
        }
        
        // –°–¢–ê–†–¢–ò–†–ê–ù–ï –í –†–ê–ó–õ–ò–ß–ù–ò –ú–û–ú–ï–ù–¢–ò
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', INITIALIZE_TERMINATOR);
        } else {
            INITIALIZE_TERMINATOR();
        }
        
        // –†–µ–∑–µ—Ä–≤–µ–Ω —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
        setTimeout(INITIALIZE_TERMINATOR, 100);
        setTimeout(INITIALIZE_TERMINATOR, 500);
        
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <img src="logo.png" alt="Stoic Business Logo" class="logo-img">
                <h1>Stoic Business Management</h1>
            </div>
            <nav class="nav-links">
                <a href="index.html">–ù–∞—á–∞–ª–æ</a>
                <a href="admin-dashboard.html">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–µ–Ω –ø–∞–Ω–µ–ª</a>
                <a href="client-profiles.html">–ö–ª–∏–µ–Ω—Ç—Å–∫–∏ –ø—Ä–æ—Ñ–∏–ª–∏</a>
                <a href="project-management.html">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∏</a>
                <a href="data-export.html">–ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ –¥–∞–Ω–Ω–∏</a>
                <a href="reports.html">–û—Ç—á–µ—Ç–∏</a>
            </nav>
        </header>

        <main class="main-content">
            <section class="content-header">
                <h2>–ö–ª–∏–µ–Ω—Ç—Å–∫–∏ –ü—Ä–æ—Ñ–∏–ª–∏ - –¢–ï–†–ú–ò–ù–ê–¢–û–† –ó–ê–©–ò–¢–ê ü§ñ</h2>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—Ç–∞ –±–∞–∑–∞ —Å –º–∞–∫—Å–∏–º–∞–ª–Ω–∞ –∑–∞—â–∏—Ç–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ</p>
            </section>

            <div class="action-buttons">
                <button id="addClientBtn" class="btn btn-primary">
                    <i class="icon">üë§</i>
                    –î–æ–±–∞–≤–∏ –Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç
                </button>
                <button id="addProjectBtn" class="btn btn-secondary">
                    <i class="icon">üìä</i>
                    –î–æ–±–∞–≤–∏ –Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç
                </button>
                <button id="exportBtn" class="btn btn-success">
                    <i class="icon">üì§</i>
                    –ï–∫—Å–ø–æ—Ä—Ç
                </button>
            </div>

            <div class="clients-grid" id="clientsGrid">
                <!-- –ö–ª–∏–µ–Ω—Ç–∏—Ç–µ —â–µ –±—ä–¥–∞—Ç –∑–∞—Ä–µ–∂–¥–∞–Ω–∏ –¥–∏–Ω–∞–º–∏—á–Ω–æ —Ç—É–∫ -->
            </div>
        </main>
    </div>

    <!-- Modal –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç -->
    <div id="clientModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–î–æ–±–∞–≤–∏ –Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç</h3>
            <form id="clientForm">
                <div class="form-group">
                    <label for="clientName">–ò–º–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞:</label>
                    <input type="text" id="clientName" name="clientName" required>
                </div>
                <div class="form-group">
                    <label for="clientEmail">Email:</label>
                    <input type="email" id="clientEmail" name="clientEmail" required>
                </div>
                <div class="form-group">
                    <label for="clientPhone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                    <input type="tel" id="clientPhone" name="clientPhone">
                </div>
                <div class="form-group">
                    <label for="clientCompany">–ö–æ–º–ø–∞–Ω–∏—è:</label>
                    <input type="text" id="clientCompany" name="clientCompany">
                </div>
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">–ó–∞–ø–∞–∑–∏</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('clientModal')">–û—Ç–∫–∞–∑</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–î–æ–±–∞–≤–∏ –Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç</h3>
            <form id="projectForm">
                <div class="form-group">
                    <label for="projectName">–ò–º–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞:</label>
                    <input type="text" id="projectName" name="projectName" required>
                </div>
                <div class="form-group">
                    <label for="projectClient">–ö–ª–∏–µ–Ω—Ç:</label>
                    <select id="projectClient" name="projectClient" required>
                        <option value="">–ò–∑–±–µ—Ä–∏ –∫–ª–∏–µ–Ω—Ç</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="projectStatus">–°—Ç–∞—Ç—É—Å:</label>
                    <select id="projectStatus" name="projectStatus" required>
                        <option value="planning">–ü–ª–∞–Ω–∏—Ä–∞–Ω–µ</option>
                        <option value="active">–ê–∫—Ç–∏–≤–µ–Ω</option>
                        <option value="completed">–ó–∞–≤—ä—Ä—à–µ–Ω</option>
                        <option value="on-hold">–°–ø—Ä—è–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="projectBudget">–ë—é–¥–∂–µ—Ç (–ª–≤.):</label>
                    <input type="number" id="projectBudget" name="projectBudget" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="projectStartDate">–ù–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞:</label>
                    <input type="date" id="projectStartDate" name="projectStartDate">
                </div>
                <div class="form-group">
                    <label for="projectEndDate">–ö—Ä–∞–π–Ω–∞ –¥–∞—Ç–∞:</label>
                    <input type="date" id="projectEndDate" name="projectEndDate">
                </div>
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">–ó–∞–ø–∞–∑–∏</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('projectModal')">–û—Ç–∫–∞–∑</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –û—Å–Ω–æ–≤–µ–Ω —Å–∫—Ä–∏–ø—Ç –∑–∞—Ä–µ–¥–µ–Ω...');
        
        // üõ°Ô∏è –ó–ê–©–ò–¢–ï–ù–ê –í–ï–†–°–ò–Ø –ù–ê –î–ê–ù–ù–ò–¢–ï
        let clientProfiles = [];
        
        // üíæ –§–£–ù–ö–¶–ò–Ø –ó–ê –ë–ï–ó–û–ü–ê–°–ù–û –ó–ê–†–ï–ñ–î–ê–ù–ï –ù–ê –î–ê–ù–ù–ò–¢–ï
        function loadClientProfilesSafely() {
            console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏...');
            
            try {
                const stored = localStorage.getItem('clientProfiles');
                if (stored && stored !== '[]' && stored !== 'null') {
                    clientProfiles = JSON.parse(stored);
                    console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ó–∞—Ä–µ–¥–µ–Ω–∏ ' + clientProfiles.length + ' –ø—Ä–æ—Ñ–∏–ª–∞');
                } else {
                    console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ù—è–º–∞ –∑–∞–ø–∞–∑–µ–Ω–∏ –¥–∞–Ω–Ω–∏, —Å—Ç–∞—Ä—Ç–∏—Ä–∞–º–µ —Å –ø—Ä–∞–∑–µ–Ω –º–∞—Å–∏–≤');
                    clientProfiles = [];
                }
                
                // –ó–∞–ø–∞–∑–≤–∞–º–µ –∫–∞—Ç–æ –∑–∞—â–∏—Ç–µ–Ω–∏ –¥–∞–Ω–Ω–∏
                if (clientProfiles.length > 0) {
                    TERMINATOR_STATE.protectedData = [...clientProfiles];
                    localStorage.setItem(TERMINATOR_CONFIG.BACKUP_KEY, JSON.stringify(clientProfiles));
                    sessionStorage.setItem(TERMINATOR_CONFIG.SESSION_KEY, JSON.stringify(clientProfiles));
                }
                
            } catch(error) {
                console.error('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ:', error);
                clientProfiles = [];
            }
            
            displayClients();
            updateProjectClientOptions();
        }
        
        // üíæ –§–£–ù–ö–¶–ò–Ø –ó–ê –ë–ï–ó–û–ü–ê–°–ù–û –ó–ê–ü–ê–ó–í–ê–ù–ï
        function saveClientProfilesSafely() {
            console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏...');
            
            try {
                const dataToSave = JSON.stringify(clientProfiles);
                localStorage.setItem('clientProfiles', dataToSave);
                
                // –û–±–Ω–æ–≤—è–≤–∞–º–µ –∑–∞—â–∏—Ç–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
                TERMINATOR_STATE.protectedData = [...clientProfiles];
                localStorage.setItem(TERMINATOR_CONFIG.BACKUP_KEY, dataToSave);
                sessionStorage.setItem(TERMINATOR_CONFIG.SESSION_KEY, dataToSave);
                
                console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –î–∞–Ω–Ω–∏ –∑–∞–ø–∞–∑–µ–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ! –ü—Ä–æ—Ñ–∏–ª–∏: ' + clientProfiles.length);
                
            } catch(error) {
                console.error('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞–ø–∞–∑–≤–∞–Ω–µ:', error);
            }
        }

        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∏—Ç–µ
        function displayClients() {
            const clientsGrid = document.getElementById('clientsGrid');
            clientsGrid.innerHTML = '';

            if (clientProfiles.length === 0) {
                clientsGrid.innerHTML = '<div class="no-data">–ù—è–º–∞ –¥–æ–±–∞–≤–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∏</div>';
                return;
            }

            clientProfiles.forEach((profile, index) => {
                const clientCard = document.createElement('div');
                clientCard.className = 'client-card';
                clientCard.innerHTML = `
                    <div class="client-header">
                        <h3>${profile.client.name}</h3>
                        <div class="client-actions">
                            <button onclick="editClient(${index})" class="btn-small btn-edit">–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π</button>
                            <button onclick="deleteClient(${index})" class="btn-small btn-delete">–ò–∑—Ç—Ä–∏–π</button>
                        </div>
                    </div>
                    <div class="client-info">
                        <p><strong>Email:</strong> ${profile.client.email}</p>
                        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${profile.client.phone || '–ù–µ –µ –ø–æ—Å–æ—á–µ–Ω'}</p>
                        <p><strong>–ö–æ–º–ø–∞–Ω–∏—è:</strong> ${profile.client.company || '–ù–µ –µ –ø–æ—Å–æ—á–µ–Ω–∞'}</p>
                    </div>
                    <div class="projects-section">
                        <h4>–ü—Ä–æ–µ–∫—Ç–∏ (${profile.projects.length})</h4>
                        <div class="projects-list">
                            ${profile.projects.map(project => `
                                <div class="project-item">
                                    <span class="project-name">${project.name}</span>
                                    <span class="project-status status-${project.status}">${getStatusText(project.status)}</span>
                                    <span class="project-budget">${project.budget ? project.budget + ' –ª–≤.' : '–ù–µ –µ –ø–æ—Å–æ—á–µ–Ω'}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                clientsGrid.appendChild(clientCard);
            });
        }

        // –ü–æ–ª—É—á–∞–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç –∑–∞ —Å—Ç–∞—Ç—É—Å–∞
        function getStatusText(status) {
            const statusMap = {
                'planning': '–ü–ª–∞–Ω–∏—Ä–∞–Ω–µ',
                'active': '–ê–∫—Ç–∏–≤–µ–Ω',
                'completed': '–ó–∞–≤—ä—Ä—à–µ–Ω',
                'on-hold': '–°–ø—Ä—è–Ω'
            };
            return statusMap[status] || status;
        }

        // –û–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –æ–ø—Ü–∏–∏—Ç–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç —Ñ–æ—Ä–º–∞—Ç–∞
        function updateProjectClientOptions() {
            const select = document.getElementById('projectClient');
            select.innerHTML = '<option value="">–ò–∑–±–µ—Ä–∏ –∫–ª–∏–µ–Ω—Ç</option>';
            
            clientProfiles.forEach((profile, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = profile.client.name;
                select.appendChild(option);
            });
        }

        // –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç
        function addClient(clientData) {
            const newProfile = {
                client: clientData,
                projects: []
            };
            clientProfiles.push(newProfile);
            saveClientProfilesSafely();
            displayClients();
            updateProjectClientOptions();
            console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ö–ª–∏–µ–Ω—Ç –¥–æ–±–∞–≤–µ–Ω:', clientData.name);
        }

        // –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç
        function addProject(projectData) {
            const clientIndex = parseInt(projectData.clientIndex);
            if (clientIndex >= 0 && clientIndex < clientProfiles.length) {
                delete projectData.clientIndex;
                clientProfiles[clientIndex].projects.push(projectData);
                saveClientProfilesSafely();
                displayClients();
                console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ü—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–µ–Ω:', projectData.name);
            }
        }

        // –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç
        function deleteClient(index) {
            if (confirm('–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ —Ç–æ–∑–∏ –∫–ª–∏–µ–Ω—Ç –∏ –≤—Å–∏—á–∫–∏—Ç–µ –º—É –ø—Ä–æ–µ–∫—Ç–∏?')) {
                const deletedClient = clientProfiles[index];
                clientProfiles.splice(index, 1);
                saveClientProfilesSafely();
                displayClients();
                updateProjectClientOptions();
                console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –ö–ª–∏–µ–Ω—Ç –∏–∑—Ç—Ä–∏—Ç:', deletedClient.client.name);
            }
        }

        // Modal —Ñ—É–Ω–∫—Ü–∏–∏
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: DOM –∑–∞—Ä–µ–¥–µ–Ω, —Å—Ç–∞—Ä—Ç–∏—Ä–∞–º–µ –æ—Å–Ω–æ–≤–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏...');
            
            // –ó–∞—Ä–µ–∂–¥–∞–º–µ –¥–∞–Ω–Ω–∏—Ç–µ
            loadClientProfilesSafely();

            // Event listeners –∑–∞ –±—É—Ç–æ–Ω–∏—Ç–µ
            document.getElementById('addClientBtn').addEventListener('click', () => openModal('clientModal'));
            document.getElementById('addProjectBtn').addEventListener('click', () => openModal('projectModal'));

            // –ó–∞—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ modal –ø—Ä–∏ –∫–ª–∏–∫ –Ω–∞ X
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    modal.style.display = 'none';
                });
            });

            // –ó–∞—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ modal –ø—Ä–∏ –∫–ª–∏–∫ –∏–∑–≤—ä–Ω –Ω–µ–≥–æ
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });

            // –§–æ—Ä–º–∞—Ç–∞ –∑–∞ –∫–ª–∏–µ–Ω—Ç
            document.getElementById('clientForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const clientData = {
                    name: formData.get('clientName'),
                    email: formData.get('clientEmail'),
                    phone: formData.get('clientPhone'),
                    company: formData.get('clientCompany')
                };
                addClient(clientData);
                this.reset();
                closeModal('clientModal');
            });

            // –§–æ—Ä–º–∞—Ç–∞ –∑–∞ –ø—Ä–æ–µ–∫—Ç
            document.getElementById('projectForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const projectData = {
                    name: formData.get('projectName'),
                    clientIndex: formData.get('projectClient'),
                    status: formData.get('projectStatus'),
                    budget: formData.get('projectBudget') ? parseFloat(formData.get('projectBudget')) : null,
                    startDate: formData.get('projectStartDate'),
                    endDate: formData.get('projectEndDate')
                };
                addProject(projectData);
                this.reset();
                closeModal('projectModal');
            });

            // –ï–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç
            document.getElementById('exportBtn').addEventListener('click', function() {
                const dataStr = JSON.stringify(clientProfiles, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'client-profiles-export.json';
                link.click();
                console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –î–∞–Ω–Ω–∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–∏');
            });
            
            console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –í—Å–∏—á–∫–∏ event listeners —Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏!');
        });
        
        // üö® –§–ò–ù–ê–õ–ù–ê –ü–†–û–í–ï–†–ö–ê
        window.addEventListener('beforeunload', function() {
            console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –°—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ —Å–µ –∑–∞—Ç–≤–∞—Ä—è, –ø—Ä–∞–≤–∏–º —Ñ–∏–Ω–∞–ª–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞...');
            saveClientProfilesSafely();
        });
        
        console.log('ü§ñ –¢–ï–†–ú–ò–ù–ê–¢–û–†: –°–∫—Ä–∏–ø—Ç –Ω–∞–ø—ä–ª–Ω–æ –∑–∞—Ä–µ–¥–µ–Ω –∏ –≥–æ—Ç–æ–≤!');
    </script>
</body>
</html>