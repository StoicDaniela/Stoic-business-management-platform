<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stoic11 | Admin Dashboard</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>

    <div class="dashboard-container">
        
        <aside class="sidebar">
            <div class="logo">
                <h1>STOIC11</h1>
            </div>
            <nav class="sidebar-menu">
                <a href="admin-dashboard.html" class="active"><i class="fas fa-chart-line"></i> Табло</a>
                <a href="client-profiles.html"><i class="fas fa-users"></i> CRM Клиенти</a>
                <a href="projects.html"><i class="fas fa-tasks"></i> Проекти</a>
                <a href="reports.html"><i class="fas fa-file-alt"></i> Отчети</a>
                <a href="meeting-scheduler.html"><i class="fas fa-calendar-alt"></i> Срещи</a>
            </nav>
            <div class="sidebar-footer">
                <button onclick="logout()"><i class="fas fa-sign-out-alt"></i> Изход</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="header">
                <h2>Административно Табло</h2>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportFullBackup()"><i class="fas fa-cloud-download-alt"></i> Пълен Backup</button>
                    <div class="user-profile">
                        <span>Здравей, Администратор!</span>
                        <i class="fas fa-user-circle"></i>
                    </div>
                </div>
            </header>

            <section class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-tasks icon-active"></i>
                    <h4>Активни Проекти</h4>
                    <h3 id="activeProjectsCount">2</h3>
                </div>
                <div class="stat-card">
                    <i class="fas fa-check-circle icon-completed"></i>
                    <h4>Завършени Проекти</h4>
                    <h3 id="completedProjectsCount">25</h3>
                </div>
                <div class="stat-card">
                    <i class="fas fa-user-tie icon-clients"></i>
                    <h4>Общо Клиенти</h4>
                    <h3 id="totalClientsCount">8</h3>
                </div>
                <div class="stat-card">
                    <i class="fas fa-euro-sign icon-revenue"></i>
                    <h4>Прогнозирани Приходи</h4>
                    <h3 id="totalRevenue">2.4М лв.</h3>
                </div>
            </section>

            <section class="projects-section card">
                <div class="section-header">
                    <h3>Последни Проекти</h3>
                    <button class="btn btn-primary" onclick="openCreateProject()">
                        <i class="fas fa-plus"></i> Нов Проект
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="projects-table">
                        <thead>
                            <tr>
                                <th>Име</th>
                                <th>Клиент</th>
                                <th>Статус</th>
                                <th>Прогрес</th>
                                <th>Краен срок</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="6">Зареждане на данни...</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="quick-info-grid">
                
                <div class="quick-report card">
                    <h3>Бърз Отчет</h3>
                    <p>ROI (Среден): <span class="highlight">22.5%</span></p>
                    <p>Breakeven (Среден): <span class="highlight">19 мес.</span></p>
                    <button class="btn btn-info" onclick="exportAllDataToExcel()">
                        <i class="fas fa-download"></i> Пълен Експорт
                    </button>
                </div>

                <div class="backup-status card">
                    <h3>Статус на Backup</h3>
                    <p>Последно запазване: <span id="lastBackupTime">Никога</span></p>
                    <p class="status-message">Системата е сигурна.</p>
                </div>
            </section>

        </main>
    </div>

    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Създай Нов Проект</h3>
                <span class="close" onclick="closeCreateProject()">&times;</span>
            </div>
            <form id="createProjectForm">
                
                <div class="form-group">
                    <label for="projectName">Име на Проекта</label>
                    <input type="text" id="projectName" name="projectName" required>
                </div>

                <div class="form-group">
                    <label for="clientName">Клиент</label>
                    <input type="text" id="clientName" name="clientName" required placeholder="Иван Петров">
                </div>

                <div class="form-group-grid">
                    <div class="form-group">
                        <label for="projectType">Тип Проект</label>
                        <select id="projectType" name="projectType" required>
                            <option value="restaurant">Ресторант</option>
                            <option value="tech">IT / Технологии</option>
                            <option value="realestate">Недвижими Имоти</option>
                            <option value="finance">Финанси</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="budget">Бюджет (лв.)</label>
                        <input type="number" id="budget" name="budget" required min="10000">
                    </div>
                </div>

                <div class="form-group-grid">
                    <div class="form-group">
                        <label for="startDate">Начална Дата</label>
                        <input type="date" id="startDate" name="startDate" required>
                    </div>

                    <div class="form-group">
                        <label for="endDate">Крайна Дата (Прогнозна)</label>
                        <input type="date" id="endDate" name="endDate" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="description">Описание</label>
                    <textarea id="description" name="description" rows="3"></textarea>
                </div>

                <button type="submit" class="btn btn-primary btn-full-width">Създай</button>
            </form>
        </div>
    </div>


    <script src="app.js"></script>

    <script>
        function updateBackupDisplay() {
            const backupDate = localStorage.getItem('stoic11_backup_date');
            if (backupDate) {
                const formattedDate = new Date(backupDate).toLocaleDateString('bg-BG', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
                document.getElementById('lastBackupTime').textContent = formattedDate;
            } else {
                document.getElementById('lastBackupTime').textContent = 'Никога';
            }
        }
        document.addEventListener('DOMContentLoaded', updateBackupDisplay);
    </script>
    
</body>
</html>
